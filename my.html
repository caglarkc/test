<!DOCTYPE html>
<html lang="tr" class="dark scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMMENSE - Performansını Maksimize Et</title>
    
    <!-- Import Map for ESM Modules -->
    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.run/@google/genai"
      }
    }
    </script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet" />
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'primary': '#10b981',
                        'secondary': '#34d399',
                        'accent': '#a7f3d0',
                        'dark-bg': '#0f172a',
                        'darker-bg': '#020617',
                        'card-bg': 'rgba(30, 41, 59, 0.7)',
                    },
                    fontFamily: {
                        'sans': ['Outfit', 'sans-serif'],
                    },
                    backgroundImage: {
                        'gradient-main': 'linear-gradient(135deg, #10b981 0%, #34d399 100%)',
                        'gradient-glow': 'radial-gradient(circle, rgba(16, 185, 129, 0.3) 0%, rgba(52, 211, 153, 0.05) 70%, transparent 100%)',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --primary-color: #10b981;
            --secondary-color: #34d399;
            --accent-color: #a7f3d0;
            --dark-bg: #0f172a;
            --darker-bg: #020617;
            --card-bg: rgba(30, 41, 59, 0.7);
            --text-color: #f8fafc;
            --text-muted: #94a3b8;
            --border-color: rgba(255, 255, 255, 0.1);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --gradient-main: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            --gradient-glow: radial-gradient(circle, rgba(16, 185, 129, 0.4) 0%, rgba(52, 211, 153, 0.1) 70%, transparent 100%);
            --box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
            --font-main: 'Outfit', sans-serif;
            --transition: all 0.3s ease;
        }

        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .animate-marquee {
            animation: marquee 25s linear infinite;
        }

        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
        }

        .perspective-device {
            perspective: 1500px;
        }
        
        /* Fixed Mockup Hover Animation */
        .mockup-container {
            transition: transform 0.8s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.6s ease;
            transform: rotateY(-18deg) rotateX(12deg) scale(0.95);
            transform-style: preserve-3d;
        }
        
        .mockup-container:hover {
            transform: rotateY(0deg) rotateX(0deg) scale(1.05);
            box-shadow: 0 0 60px rgba(16, 185, 129, 0.4);
        }

        .loader {
            width: 18px;
            height: 18px;
            border: 2px solid #fff;
            border-bottom-color: transparent;
            border-radius: 50%;
            display: inline-block;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-darker-bg text-slate-50 font-sans selection:bg-primary selection:text-white">

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 bg-darker-bg z-[100] flex flex-col items-center justify-center gap-8 text-4xl font-bold transition-transform translate-x-full">
        <button id="close-menu" class="absolute top-8 right-8 text-primary">
            <span class="material-symbols-outlined text-5xl">close</span>
        </button>
        <a href="#features" class="hover:text-primary">Özellikler</a>
        <a href="#nutrition" class="hover:text-primary">AI Kalori</a>
        <a href="#pricing" class="hover:text-primary">Fiyatlar</a>
        <a href="#social" class="hover:text-primary">Topluluk</a>
        <button class="bg-gradient-main text-white px-10 py-4 rounded-full font-bold text-2xl shadow-lg">Giriş Yap</button>
    </div>

    <!-- Nav -->
    <nav class="sticky top-0 z-50 glass border-b border-white/5">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
            <a href="#" class="flex items-center gap-2 group">
                <div class="w-10 h-10 bg-primary rounded-xl flex items-center justify-center group-hover:rotate-12 transition-transform shadow-[0_0_20px_rgba(16,185,129,0.5)]">
                    <span class="material-symbols-outlined text-white font-bold">bolt</span>
                </div>
                <span class="text-2xl font-black tracking-tight uppercase">IMMENSE</span>
            </a>
            
            <div class="hidden md:flex items-center gap-10 font-semibold text-sm uppercase tracking-wider">
                <a href="#features" class="text-slate-400 hover:text-primary transition-colors cursor-pointer">Özellikler</a>
                <a href="#nutrition" class="text-slate-400 hover:text-primary transition-colors cursor-pointer">AI Kalori</a>
                <a href="#pricing" class="text-slate-400 hover:text-primary transition-colors cursor-pointer">Fiyatlandırma</a>
                <a href="#social" class="text-slate-400 hover:text-primary transition-colors cursor-pointer">Topluluk</a>
                <button onclick="alert('Giriş sistemi yakında aktif!')" class="bg-white/10 hover:bg-white/20 border border-white/10 px-6 py-2.5 rounded-full transition-all">Giriş Yap</button>
            </div>

            <button id="open-menu" class="md:hidden text-primary">
                <span class="material-symbols-outlined text-3xl">menu</span>
            </button>
        </div>
    </nav>

    <!-- Hero -->
    <section class="relative pt-24 pb-32 overflow-hidden bg-gradient-glow">
        <div class="max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-20 items-center">
            <div class="relative z-10 space-y-10">
                <div class="inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-1.5 rounded-full text-xs font-bold border border-primary/20">
                    <span class="relative flex h-2 w-2">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-primary"></span>
                    </span>
                    YENİ: V2.0 BETA ÇIKTI
                </div>
                <h1 class="text-6xl md:text-8xl font-black leading-[1.1] tracking-tight">
                    Sınırlarını <br/>
                    <span class="text-transparent bg-clip-text bg-gradient-main">Veriyle</span> Zorla.
                </h1>
                <p class="text-xl text-slate-400 max-w-lg leading-relaxed">
                    Sıradan fitness uygulamalarını unutun. IMMENSE, yapay zeka ve gerçek zamanlı analizle antrenmanınızı bir bilim dalına dönüştürür.
                </p>
                <div class="flex flex-wrap gap-5 pt-4">
                    <a href="#pricing" class="bg-gradient-main text-white px-10 py-5 rounded-2xl text-xl font-bold shadow-[0_20px_40px_-15px_rgba(16,185,129,0.5)] hover:-translate-y-1 transition-transform">Ücretsiz Başla</a>
                    <button class="flex items-center gap-3 px-10 py-5 rounded-2xl text-xl font-bold glass hover:bg-white/10 transition-all">
                        <span class="material-symbols-outlined fill-1">play_circle</span>
                        Daha Fazla Bilgi
                    </button>
                </div>
            </div>

            <!-- Animated Mockup -->
            <div class="relative perspective-device flex justify-center lg:justify-end">
                <div class="mockup-container w-80 h-[650px] bg-darker-bg border-[8px] border-slate-800 rounded-[50px] relative overflow-hidden ring-1 ring-white/10">
                    <!-- Interface -->
                    <div class="h-full w-full bg-[#050810] p-6 flex flex-col gap-5">
                        <div class="flex justify-between items-center text-xs text-slate-500">
                            <span id="greeting-text">Hoş Geldin, ŞAMPİYON</span>
                            <span class="material-symbols-outlined text-lg">notifications</span>
                        </div>
                        <div class="bg-gradient-main p-6 rounded-3xl text-white shadow-lg">
                            <div class="flex justify-between items-start mb-3">
                                <span class="text-[10px] font-black uppercase tracking-widest opacity-80">Antrenman Süresi</span>
                                <div class="w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse shadow-[0_0_10px_rgba(239,68,68,0.8)]"></div>
                            </div>
                            <div class="text-5xl font-black tracking-tighter" id="timer">00:00</div>
                            <div class="text-xs font-bold uppercase mt-2 opacity-90">Upper Body Blast</div>
                        </div>
                        
                        <div class="glass p-4 rounded-2xl">
                            <div class="text-[10px] text-slate-500 uppercase font-bold mb-4">Gerçek Zamanlı EKG</div>
                            <div class="flex items-end gap-1.5 h-16">
                                <div class="flex-1 bg-primary/20 h-[30%] rounded-full animate-pulse"></div>
                                <div class="flex-1 bg-primary/40 h-[60%] rounded-full animate-pulse" style="animation-delay: 0.1s"></div>
                                <div class="flex-1 bg-primary/60 h-[45%] rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                                <div class="flex-1 bg-primary/80 h-[90%] rounded-full animate-pulse" style="animation-delay: 0.3s"></div>
                                <div class="flex-1 bg-primary h-full rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
                                <div class="flex-1 bg-primary h-[70%] rounded-full animate-pulse" style="animation-delay: 0.5s"></div>
                                <div class="flex-1 bg-primary/50 h-[50%] rounded-full animate-pulse" style="animation-delay: 0.6s"></div>
                            </div>
                            <div class="mt-3 flex justify-between items-center">
                                <span class="text-xs font-bold text-slate-400">KALP RİTMİ</span>
                                <span class="text-xl font-black text-primary">138 BPM</span>
                            </div>
                        </div>

                        <div class="space-y-3">
                            <div class="glass p-4 rounded-2xl flex items-center justify-between border-primary/20">
                                <div class="flex items-center gap-4">
                                    <div class="w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary">
                                        <span class="material-symbols-outlined">fitness_center</span>
                                    </div>
                                    <div>
                                        <div class="text-sm font-bold">Chest Press</div>
                                        <div class="text-[10px] text-slate-500">4 Set • 12 Reps</div>
                                    </div>
                                </div>
                                <span class="material-symbols-outlined text-primary">check_circle</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Float Card -->
                <div class="absolute -left-10 bottom-24 glass p-6 rounded-3xl border-primary/20 shadow-2xl transform hover:scale-110 transition-transform hidden md:block">
                    <div class="flex items-center gap-4">
                        <div class="w-14 h-14 rounded-2xl bg-orange-500/20 flex items-center justify-center text-orange-500">
                            <span class="material-symbols-outlined text-3xl font-bold">local_fire_department</span>
                        </div>
                        <div>
                            <div class="text-3xl font-black">642</div>
                            <div class="text-[10px] font-bold text-slate-500 uppercase">YAKILAN KALORİ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Marquee -->
    <div class="w-full bg-primary py-6 overflow-hidden border-y border-white/5">
        <div class="flex whitespace-nowrap animate-marquee">
            <div class="flex items-center gap-16 px-8 text-2xl font-black text-darker-bg uppercase italic">
                <span>Maximum Performance</span> <span>✦</span>
                <span>AI Driven Insights</span> <span>✦</span>
                <span>Hyper Personalized</span> <span>✦</span>
                <span>Bio-Tracking Ready</span> <span>✦</span>
            </div>
            <div class="flex items-center gap-16 px-8 text-2xl font-black text-darker-bg uppercase italic">
                <span>Maximum Performance</span> <span>✦</span>
                <span>AI Driven Insights</span> <span>✦</span>
                <span>Hyper Personalized</span> <span>✦</span>
                <span>Bio-Tracking Ready</span> <span>✦</span>
            </div>
        </div>
    </div>

    <!-- Features -->
    <section id="features" class="py-32 px-6">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-24 space-y-4">
                <h2 class="text-primary font-bold tracking-[0.3em] uppercase text-sm">Neler Sunuyoruz?</h2>
                <h3 class="text-5xl font-black">Fitnessın Geleceğiyle Tanışın</h3>
            </div>
            
            <div class="grid md:grid-cols-3 gap-8">
                <div class="glass p-10 rounded-[40px] hover:bg-white/[0.07] transition-all group">
                    <div class="w-16 h-16 rounded-2xl bg-primary/10 flex items-center justify-center text-primary mb-8 group-hover:scale-110 transition-transform">
                        <span class="material-symbols-outlined text-4xl">monitoring</span>
                    </div>
                    <h4 class="text-2xl font-bold mb-4">Derin Analiz</h4>
                    <p class="text-slate-400 leading-relaxed">Antrenman hacminizi, toparlanma sürenizi ve progresif aşırı yüklemenizi otomatik olarak analiz ederiz.</p>
                </div>

                <div class="glass p-10 rounded-[40px] hover:bg-white/[0.07] transition-all group">
                    <div class="w-16 h-16 rounded-2xl bg-indigo-500/10 flex items-center justify-center text-indigo-500 mb-8 group-hover:scale-110 transition-transform">
                        <span class="material-symbols-outlined text-4xl">psychology</span>
                    </div>
                    <h4 class="text-2xl font-bold mb-4">AI Koçluk</h4>
                    <p class="text-slate-400 leading-relaxed">Gemini destekli akıllı asistanımız, formunuzu ve uyku verilerinizi kullanarak günlük programınızı optimize eder.</p>
                </div>

                <div class="glass p-10 rounded-[40px] hover:bg-white/[0.07] transition-all group">
                    <div class="w-16 h-16 rounded-2xl bg-amber-500/10 flex items-center justify-center text-amber-500 mb-8 group-hover:scale-110 transition-transform">
                        <span class="material-symbols-outlined text-4xl">nutrition</span>
                    </div>
                    <h4 class="text-2xl font-bold mb-4">Görsel Kalori</h4>
                    <p class="text-slate-400 leading-relaxed">Yemeğinizin fotoğrafını çekin, AI anında makroları hesaplasın. Manuel veri girişine elveda deyin.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Nutrition (AI Integration) -->
    <section id="nutrition" class="py-32 px-6 glass rounded-[60px] mx-6">
        <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-20 items-center">
            <div class="space-y-8">
                <span class="bg-primary/20 text-primary px-5 py-2 rounded-full font-bold text-sm tracking-widest uppercase">GEMINI POWERED</span>
                <h2 class="text-6xl font-black tracking-tight leading-none">Fotoğraf Çek, <br/> Makroları Gör.</h2>
                <p class="text-xl text-slate-400">Karmaşık kalori cetvelleriyle uğraşmayın. Yapay zekamız tabağınızdaki besinleri tanır ve saniyeler içinde analiz eder.</p>
                <button id="start-camera-btn" class="bg-primary text-white px-10 py-5 rounded-2xl text-xl font-bold flex items-center gap-4 hover:scale-105 transition-transform shadow-2xl">
                    <span class="material-symbols-outlined">add_a_photo</span>
                    Şimdi Dene
                </button>
            </div>

            <div class="relative aspect-square glass rounded-[50px] overflow-hidden group border-2 border-primary/20">
                <video id="camera-preview" class="hidden w-full h-full object-cover" autoplay playsinline></video>
                <img id="static-preview" src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?auto=format&fit=crop&q=80&w=1000" class="w-full h-full object-cover opacity-60" />
                
                <div id="capture-overlay" class="hidden absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center">
                    <button id="capture-photo-btn" class="w-24 h-24 rounded-full border-[10px] border-primary flex items-center justify-center bg-white shadow-2xl hover:scale-110 transition-transform"></button>
                </div>

                <div id="nutrition-card" class="absolute bottom-6 left-6 right-6 glass p-8 rounded-3xl translate-y-20 opacity-0 transition-all duration-700">
                    <div id="scanning-label" class="hidden absolute -top-12 left-0 text-primary font-bold animate-pulse text-sm">AI ANALİZİ YAPILIYOR...</div>
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h4 id="food-name" class="text-2xl font-black">Analiz Hazır</h4>
                            <div id="food-tags" class="flex gap-2 mt-2"></div>
                        </div>
                        <div class="text-right">
                            <span id="kcal-val" class="text-4xl font-black text-primary">0</span>
                            <div class="text-[10px] font-bold text-slate-500 uppercase">KCAL</div>
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-white/5 p-4 rounded-2xl text-center border border-white/5">
                            <div class="text-xs text-slate-500 font-bold mb-1 uppercase">Protein</div>
                            <div id="pro-val" class="text-lg font-black text-primary">0g</div>
                        </div>
                        <div class="bg-white/5 p-4 rounded-2xl text-center border border-white/5">
                            <div class="text-xs text-slate-500 font-bold mb-1 uppercase">Karb</div>
                            <div id="carb-val" class="text-lg font-black">0g</div>
                        </div>
                        <div class="bg-white/5 p-4 rounded-2xl text-center border border-white/5">
                            <div class="text-xs text-slate-500 font-bold mb-1 uppercase">Yağ</div>
                            <div id="fat-val" class="text-lg font-black text-orange-400">0g</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing -->
    <section id="pricing" class="py-32 px-6">
        <div class="max-w-5xl mx-auto">
            <div class="text-center mb-20 space-y-4">
                <h3 class="text-5xl font-black uppercase tracking-tight">Üyelik Planları</h3>
                <p class="text-slate-400">Gizli ücret yok. Sadece saf performans.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="glass p-12 rounded-[50px] space-y-8 relative overflow-hidden group hover:border-primary/30 transition-all">
                    <h4 class="text-3xl font-bold">Ücretsiz</h4>
                    <div class="text-5xl font-black italic opacity-30">₺0</div>
                    <ul class="space-y-4 text-slate-400 font-medium">
                        <li class="flex items-center gap-3"><span class="material-symbols-outlined text-primary">check</span> Manuel Takip</li>
                        <li class="flex items-center gap-3"><span class="material-symbols-outlined text-primary">check</span> Temel İstatistikler</li>
                        <li class="flex items-center gap-3 opacity-30"><span class="material-symbols-outlined text-slate-600">close</span> AI Koçluk</li>
                    </ul>
                    <button class="w-full py-5 rounded-2xl border border-white/10 font-bold hover:bg-white/5 transition-all">Şimdi Başla</button>
                </div>

                <div class="bg-gradient-main p-1 rounded-[50px] shadow-2xl shadow-primary/20 transform scale-105">
                    <div class="bg-darker-bg h-full w-full rounded-[48px] p-12 space-y-8 relative">
                        <div class="absolute top-8 right-8 bg-primary text-white px-4 py-1 rounded-full text-[10px] font-black uppercase">EN POPÜLER</div>
                        <h4 class="text-3xl font-bold">PRO Üyelik</h4>
                        <div class="flex items-end gap-2">
                            <span class="text-5xl font-black">₺199</span>
                            <span class="text-slate-500 font-bold mb-2">/ AY</span>
                        </div>
                        <ul class="space-y-4 font-semibold">
                            <li class="flex items-center gap-3"><span class="material-symbols-outlined text-primary">verified</span> Sınırsız AI Kalori Tarama</li>
                            <li class="flex items-center gap-3"><span class="material-symbols-outlined text-primary">verified</span> Kişiselleştirilmiş AI Koç</li>
                            <li class="flex items-center gap-3"><span class="material-symbols-outlined text-primary">verified</span> Gelişmiş Biyometrik Veriler</li>
                        </ul>
                        <button class="w-full py-5 rounded-2xl bg-gradient-main text-white font-bold shadow-xl hover:scale-105 transition-transform uppercase tracking-wider">PRO'ya Geç</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="social" class="py-20 px-6 border-t border-white/5 bg-darker-bg">
        <div class="max-w-7xl mx-auto grid md:grid-cols-4 gap-16">
            <div class="col-span-2 space-y-6">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-primary rounded-2xl flex items-center justify-center text-white">
                        <span class="material-symbols-outlined text-3xl font-bold">bolt</span>
                    </div>
                    <span class="text-3xl font-black uppercase tracking-tight">IMMENSE</span>
                </div>
                <p class="text-slate-500 max-w-sm leading-relaxed">Yeni nesil sporcu takip platformu. Antrenmanlarınızı şansa bırakmayın, verilerle yönetin.</p>
                <div class="flex gap-4">
                    <div class="w-12 h-12 rounded-2xl glass flex items-center justify-center hover:text-primary cursor-pointer transition-all font-bold">IG</div>
                    <div class="w-12 h-12 rounded-2xl glass flex items-center justify-center hover:text-primary cursor-pointer transition-all font-bold">TW</div>
                </div>
            </div>
            <div class="space-y-6">
                <h5 class="text-lg font-bold uppercase tracking-tight">Linkler</h5>
                <ul class="space-y-4 text-slate-500 font-medium uppercase text-xs tracking-wider">
                    <li><a href="#features" class="hover:text-primary transition-colors">Özellikler</a></li>
                    <li><a href="#nutrition" class="hover:text-primary transition-colors">AI Kalori</a></li>
                    <li><a href="#pricing" class="hover:text-primary transition-colors">Üyelik</a></li>
                </ul>
            </div>
            <div class="space-y-6">
                <h5 class="text-lg font-bold uppercase tracking-tight">Haber Bülteni</h5>
                <div class="flex gap-2">
                    <input type="email" placeholder="E-posta" class="glass bg-white/5 px-4 py-3 rounded-xl flex-1 outline-none focus:ring-1 ring-primary font-medium">
                    <button class="bg-primary text-white p-3 rounded-xl hover:scale-110 transition-transform"><span class="material-symbols-outlined">send</span></button>
                </div>
            </div>
        </div>
        <div class="max-w-7xl mx-auto mt-20 pt-8 border-t border-white/5 text-center text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]">
            © 2024 IMMENSE FITNESS TECHNOLOGY. TÜM HAKLARI SAKLIDIR.
        </div>
    </footer>

    <!-- Scripts Logic -->
    <script type="module">
        import { GoogleGenAI, Type } from "@google/genai";

        // Global State & AI Initialization
        const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
        let stream = null;

        // UI Selectors
        const mobileMenu = document.getElementById('mobile-menu');
        const openMenuBtn = document.getElementById('open-menu');
        const closeMenuBtn = document.getElementById('close-menu');
        const startCameraBtn = document.getElementById('start-camera-btn');
        const video = document.getElementById('camera-preview');
        const staticImg = document.getElementById('static-preview');
        const captureOverlay = document.getElementById('capture-overlay');
        const captureBtn = document.getElementById('capture-photo-btn');
        const nutritionCard = document.getElementById('nutrition-card');
        const scanningLabel = document.getElementById('scanning-label');

        // Nav Scrolling Helper
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if(target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Mobile Menu Toggles
        openMenuBtn.onclick = () => mobileMenu.classList.remove('translate-x-full');
        closeMenuBtn.onclick = () => mobileMenu.classList.add('translate-x-full');
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.onclick = () => mobileMenu.classList.add('translate-x-full');
        });

        // Mock Timer Logic
        let totalSeconds = 0;
        setInterval(() => {
            totalSeconds++;
            const minutes = Math.floor(totalSeconds / 60).toString().padStart(2, '0');
            const seconds = (totalSeconds % 60).toString().padStart(2, '0');
            const timerEl = document.getElementById('timer');
            if(timerEl) timerEl.innerText = `${minutes}:${seconds}`;
        }, 1000);

        // Greeting Message
        const currentHour = new Date().getHours();
        const greetingEl = document.getElementById('greeting-text');
        if(greetingEl) {
            greetingEl.innerText = currentHour < 12 ? "Günaydın, ŞAMPİYON" : currentHour < 18 ? "Hoş Geldin, ŞAMPİYON" : "İyi Akşamlar, ŞAMPİYON";
        }

        // Camera & Nutrition Scanner Functionality
        startCameraBtn.onclick = async () => {
            try {
                if(stream) {
                    stopCamera();
                    return;
                }
                stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
                video.srcObject = stream;
                video.classList.remove('hidden');
                staticImg.classList.add('hidden');
                captureOverlay.classList.remove('hidden');
                startCameraBtn.innerHTML = "<span class='loader mr-2'></span> Kamera Kapat";
            } catch (err) {
                console.error("Camera access error:", err);
                alert("Kamera erişimi reddedildi veya hata oluştu.");
            }
        };

        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                stream = null;
            }
            video.classList.add('hidden');
            staticImg.classList.remove('hidden');
            captureOverlay.classList.add('hidden');
            startCameraBtn.innerHTML = "<span class='material-symbols-outlined mr-2'>add_a_photo</span> Şimdi Dene";
        }

        captureBtn.onclick = async () => {
            if(!stream) return;

            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const context = canvas.getContext('2d');
            context.drawImage(video, 0, 0);
            const base64Image = canvas.toDataURL('image/jpeg').split(',')[1];

            // Trigger Visual Feedback
            scanningLabel.classList.remove('hidden');
            nutritionCard.style.opacity = '1';
            nutritionCard.style.transform = 'translateY(0)';
            document.getElementById('food-name').innerText = "AI Analiz Ediyor...";

            try {
                const result = await ai.models.generateContent({
                    model: 'gemini-3-flash-preview',
                    contents: [
                        { text: "Analyze the food in this photo. Return a JSON object with: foodName (string), kcal (number), protein (string like '25g'), carbs (string), fat (string), and tags (array of short strings). Language: Turkish." },
                        { inlineData: { mimeType: 'image/jpeg', data: base64Image } }
                    ],
                    config: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: Type.OBJECT,
                            properties: {
                                foodName: { type: Type.STRING },
                                kcal: { type: Type.NUMBER },
                                protein: { type: Type.STRING },
                                carbs: { type: Type.STRING },
                                fat: { type: Type.STRING },
                                tags: { type: Type.ARRAY, items: { type: Type.STRING } }
                            },
                            required: ["foodName", "kcal", "protein", "carbs", "fat"]
                        }
                    }
                });

                const nutritionData = JSON.parse(result.text);
                updateNutritionDisplay(nutritionData);
                stopCamera();
            } catch (err) {
                console.error("Analysis Error:", err);
                document.getElementById('food-name').innerText = "Analiz Hatası!";
            } finally {
                scanningLabel.classList.add('hidden');
            }
        };

        function updateNutritionDisplay(data) {
            document.getElementById('food-name').innerText = data.foodName || "Bilinmeyen Yemek";
            document.getElementById('kcal-val').innerText = data.kcal || 0;
            document.getElementById('pro-val').innerText = data.protein || "0g";
            document.getElementById('carb-val').innerText = data.carbs || "0g";
            document.getElementById('fat-val').innerText = data.fat || "0g";
            
            const tagBox = document.getElementById('food-tags');
            tagBox.innerHTML = "";
            (data.tags || []).slice(0, 3).forEach(tag => {
                const tagEl = document.createElement('span');
                tagEl.className = "bg-primary/20 text-primary px-2 py-0.5 rounded-md text-[9px] font-bold uppercase tracking-tight";
                tagEl.innerText = tag;
                tagBox.appendChild(tagEl);
            });
        }
    </script>
</body>
</html>